function cLog(log) {
    console.log(log)
}

$(document).ready(function () {

    $("input").on("change.autofill", function () {
        $(".js-input-placeholder").addClass("active");
    }).click(function() {
        $(this).unbind("change.autofill");
    });




    $('.js-toggle-menu').click(function (e) {
        e.preventDefault();

        if($('.js-login').hasClass('active') || $('.js-user-menu').hasClass('active')) {
            $('.js-login').removeClass('active');
            $('.js-user-menu').removeClass('active');
            $('html').removeClass('menu-show');

        } else {
            $('.js-mobile-menu').toggleClass('active');
            $('html').toggleClass('menu-show');
            $('.header').toggleClass('active');
        }

    });

    $('.js-header-login-btn').click(function (e) {

        if($('.js-mobile-menu').hasClass('active')) {
            $('.js-mobile-menu').removeClass('active');
            $('.header').removeClass('active');
            setTimeout(function() {
                $('.js-login').toggleClass('active');
            }, 300);

        } else {
            $('.js-login').toggleClass('active');
            $('html').toggleClass('menu-show');
        }
    });

    $('.js-user-menu-btn').click(function (e) {
        e.preventDefault();

        if($('.js-mobile-menu').hasClass('active')) {
            $('.js-mobile-menu').removeClass('active');
            $('.header').removeClass('active');
            setTimeout(function() {
                $('.js-user-menu').toggleClass('active');
            }, 300);

        } else {
            $('.js-user-menu').toggleClass('active');
            $('html').toggleClass('menu-show');
        }
    });

    $('.js-menu-dropdown-btn').click(function (e) {
        e.preventDefault();
        var target = $(this).parents('.js-menu-dropdown');

        // target.find('.js-menu-dropdown-list').slideDown();

        if (target.hasClass('active')) {
            target.removeClass('active').find('.js-menu-dropdown-list').slideUp();
        }

        else {
            $('.js-menu-dropdown').removeClass('active').find('.js-menu-dropdown-list').slideUp();
            target.addClass('active').find('.js-menu-dropdown-list').slideDown();
        }

    });

    $('.js-submenu-btn').click(function (e) {
        e.preventDefault();
        var target = $(this).parents('.js-submenu')

        if (target.hasClass('active')) {
            target.removeClass('active').find('.js-submenu-list').slideUp();
        }

        else {
            $('.js-submenu').removeClass('active').find('.js-submenu-list').slideUp();
            target.addClass('active').find('.js-submenu-list').slideDown();
        }

    })

    var menuHover = $('.js-menu-hover');

    menuHover.on('mouseover', function () {
        var x = $('.js-menu-hover-wrp').position().left;
        var y = $('.js-menu-hover-inner').offset().top - $('.header__wrp').offset().top;
        var menuWidth = $(this).find('.js-menu-hover-inner').outerWidth();
        var menuHeight = $(this).find('.js-menu-hover-inner').outerHeight();

        var caretX = $(this).position().left + $(this).outerWidth() / 2;

        $('.js-overlay').addClass('active');

        $('.js-menu-hover-caret').addClass('active').css({
            transform: 'translateX(' + caretX + 'px)',
        });

        $('.js-menu-hover-bg').addClass('active').css({
            transform: 'translateX(' + x + 'px) translateY(' + y + 'px)',
            width: menuWidth,
            height: menuHeight
        });
    }).on('mouseout',function () {
        $('.js-menu-hover-caret').removeClass('active');
        $('.js-menu-hover-bg').removeClass('active');
        $('.js-overlay').removeClass('active');
    });

    // menuHover.each(function (index, item) {
    //
    // });

    $('.js-faq-filter-btn').click(function (e) {
        e.preventDefault();
        var target = $(this).data('filter');

        $('.js-faq-filter-btn').removeClass('active');
        $(this).addClass('active');

        $('.js-faq-filter-item:not(.'+ target +')').addClass('hide-item');

        setTimeout(function() {
            $('.js-faq-filter-item:not(.'+ target +')').hide();
        }, 500);

        $('.js-faq-filter-item.'+target).show();

        setTimeout(function() {
            $('.js-faq-filter-item.'+target).removeClass('hide-item')
        }, 100);

        if($('.subpage-link__list').hasClass('opened')) {
            // $('.subpage-link__li').removeClass('active');
            // $('.subpage-link__li-mobile').slideUp();
            // $(this).parent().addClass('active');
            // $('.subpage-link__li:not(.active)').slideUp();
        }

        // if($('.subpage-link__list').hasClass('opened')) {
        //     $('.subpage-link__list').removeClass('opened');
        //     $('.subpage-link__li').removeClass('active');
        //     $('.subpage-link__li:not(.active)').slideUp();
        //     $(this).parent().addClass('active')
        // }

    });

    $('.subpage-link__li.active').click(function (e) {
        e.preventDefault();
    });

    $('.subpage-link__li').click(function (e) {

        if($(this).parents('.subpage-link').hasClass('subpage-link--filter') ) {
            e.preventDefault();
        }

        if($(window).width() < 577) {

            if($(this).hasClass('active')) {
                $(this).parents('.subpage-link__list').toggleClass('opened');
                $('.subpage-link__li:not(.active)').slideToggle();
            } else {
                $(this).parents('.subpage-link__list').removeClass('opened').addClass('selected');
                $('.subpage-link__li').removeClass('active');
                $(this).addClass('active');
                $('.subpage-link__li:not(.active)').slideUp();
            }
        }
    });

    $('.card__list-link.active').click(function (e) {
        if($(window).width() < 769) {
            e.preventDefault();
            $('.card__list').toggleClass('active');
            $('.card__list-link:not(.active)').slideToggle()
        }
    });

    // search autocomplete

    $('.js-search-input').on('focus', function (e) {
        $('.js-overlay').addClass('active');
        $('.js-search').addClass('active');
        $('.js-search-category').removeClass('active');
    }).on('focusout', function () {
        if(!$(this).val()=="" || !$(this).val()==" ") {
            $(this).addClass('active');
        } else {
            $(this).removeClass('active');
        }
    });

    $('.js-search-category-btn').on('click', function (e) {
        $('.js-overlay').addClass('active');
        $('.js-search-category').addClass('active');
        $('.js-search').removeClass('active').addClass('opened');
    });

    function closeModals() {
        $('.js-overlay').removeClass('active');
        $('.js-search').removeClass('active');
        $('.js-search').removeClass('opened');
        $('.js-modal').fadeOut().removeClass('active');
        $('.js-search-category').removeClass('active');
        $('.js-tab-mobile').removeClass('active');

        if($('.js-youtube-iframe').length) {
            $('.js-youtube-iframe').each(function (index, item) {
                var check = $(this).parents('.js-youtube-wrp').find('.js-youtube-iframe-overlay');

                if(check.hasClass('hide-overlay')) {
                    var currentSrc = $(this).data('src');
                    $(this).attr('src', currentSrc);
                    $('.js-youtube-iframe-overlay').removeClass('hide-overlay');
                }
            });
        }
    }

    $('.js-overlay').click(function (e) {
        e.preventDefault();
        closeModals();
    });

    $('.js-modal-close').click(function (e) {
        e.preventDefault();
        closeModals();
    });

    $(".js-user-profile").on("change", function() {
        var files = !!this.files ? this.files : [];
        if (!files.length || !window.FileReader) return; // no file selected, or no FileReader support

        if (/^image/.test(files[0].type)) { // only image file
            var reader = new FileReader(); // instance of the FileReader
            reader.readAsDataURL(files[0]); // read the local file

            reader.onloadend = function() { // set image data as background of div
                // $("#imagePreview").css("background-image", "url(" + this.result + ")");
                // console.log(this.result);
                $(".js-user-profile-img").attr('src', this.result)
            }
        }
    });

    $('.js-play-video').on('click', function(ev) {
        ev.preventDefault();
        var src = $(this).parents('.js-youtube-wrp').find(".js-youtube-iframe")[0].src;
        $(this).parents('.js-youtube-wrp').find(".js-youtube-iframe").attr('data-src', src);
        $(this).parents('.js-youtube-wrp').find(".js-youtube-iframe")[0].src += "&autoplay=1";
        $(this).parents('.js-youtube-wrp').find('.js-youtube-iframe-overlay').addClass('hide-overlay')
    });

    $('.js-modal-btn').click(function (e) {
        e.preventDefault();
        var target = $(this).data('target');
        $('.js-modal-target').hide();
        $('.js-modal-target#' + target).show();
        $('.js-overlay').addClass('active');
        $('.js-modal').fadeIn().addClass('active');
        // $('#programModal').fadeIn().addClass('active');
    });


    $('.js-comments-more').click(function (e) {
        e.preventDefault();
        var target = $(this).parents('.js-comments').find('.js-comments-hide');
        target.slideDown(300).addClass('active');
        $(this).slideUp(300);
    });

    $('.js-comments-less').click(function (e) {
        e.preventDefault();
        var target = $(this).parents('.js-comments-hide');
        target.slideUp(300).removeClass('active');
        $('.js-comments-more').slideDown(300);

        setTimeout(function() {
        }, 290);
    });

    $('.js-comments-txt').each(function (index, item) {
        var text = $(this).text().trim();
        var charLimit = 160;

        cLog(text.length);

        if(text.length > charLimit) {
            var shortText = text.trim().substr(0, charLimit);

            $(this).html(shortText + '... <button class="comments-read-more js-read-more">Devamını Oku</button>').attr('data-text', text);
        }
        // console.log(shortText)
    });

    $('.js-comment-btn').click(function (e) {
        e.preventDefault();
        $('.js-comment-form').addClass('active');
    });

    $('.js-read-more').click(function (e) {
        e.preventDefault();
        var text = $(this).parent().data('text');
        $(this).parent().html(text)

    });

    // document.onkeydown = function(evt) {
    //     evt = evt || window.event;
    //     // esc
    //     if (evt.keyCode == 27) {
    //         $(this).removeClass('active');
    //         $('.js-search').removeClass('active');
    //     }
    // };

    // position tab

    $('.js-position-tab').click(function (e) {
        e.preventDefault();
        var target = $(this).data('target');

        $('.js-position-tab').removeClass('active');
        $('.js-position-tab-target').removeClass('active');

        $(this).addClass('active');
        $('.js-position-tab-target#' + target).addClass('active');
    });

    // $('.js-programs-mobile.active').click(function (e) {
    //     e.preventDefault();
    //     // $('.js-programs-mobile:not(.active)').slideToggle();
    //     // $('.js-programs-mobile').removeClass('active');
    //     // $(this).addClass('active');
    //     // cLog($(this).html());
    // });

    $('.js-programs-mobile').click(function (e) {
        e.preventDefault();
        if($(this).hasClass('active')) {
            $(this).parents('.programs-tab-mobile').toggleClass('opened');
            $('.js-programs-mobile:not(.active)').slideToggle();
        } else {
            $('.js-programs-mobile').removeClass('active');
            $(this).parents('.programs-tab-mobile').removeClass('opened');
            $(this).addClass('active');
            $('.js-programs-mobile:not(.active)').slideUp();

            var target = $(this).data('target');
            $('.js-position-tab-target').removeClass('active');
            $('.js-position-tab-target#' + target).addClass('active');

        }
    });


    // input validation

    $('.js-input').on('focusout', function (e) {
        // e.preventDefault();
        if(!$(this).val()=="" || !$(this).val()==" ") {
            $(this).parents('.js-input-container').find('.js-input-placeholder').addClass('active');
        } else {
            $(this).parents('.js-input-container').find('.js-input-placeholder').removeClass('active');
        }
    }).each(function (i, item) {
        $(this).on('focusout', function (e) {
            if($(this).val()=="" || $(this).val()==" " || $(this).val()==null) {
                // $(this).parents('.contact-form__item').find('.error-message').show()
                // $(this).addClass('error')
                $(this).parents('.js-input-container').addClass('has-error').find('.js-form-error').addClass('active');
            } else {
                $(this).parents('.js-input-container').removeClass('has-error').find('.js-form-error').removeClass('active');
            }


        })
    }).on('change keyup', function (e) {
        e.preventDefault();
        $(this).parents('.js-input-container').removeClass('has-error').find('.js-form-error').removeClass('active');
    });

    $('.js-form').on('submit', function (e) {
        e.preventDefault();

        var input = $(this).find('.js-input'),
            inputVal = input.val(),
            count = input.length,
            validCount = 0;

        input.each(function (e) {
            if($(this).val()=="" || $(this).val()==" " || $(this).val()==null)  {
                $(this).parents('.js-input-container').addClass('has-error').find('.js-form-error').addClass('active');
            }
            else (
                validCount++
            );

            return validCount
        });

        console.log(validCount);



        if(validCount==count) {
            console.log('succes');

            if($(this).hasClass('js-call-form')) {

                $('.call-form__wrp').addClass('form-send')

            } else if($('#formResult').length)  {
                $('.js-modal-target').hide();
                $('.js-modal-target#formResult').show();
                $('.js-overlay').addClass('active');
                $('.js-modal').fadeIn().addClass('active');
            }

            input.val('');
            $('.js-input-placeholder').removeClass('active');

            return true
            // return false
        }
        else {
            console.log('form error');
            return false
        }
    });

    $('.call-form-result').click(function (e) {
        e.preventDefault();
        $('.call-form__wrp').removeClass('form-send')
    });

    $('.js-hide-element').click(function (e) {
        e.preventDefault();
        var target = $(this).data('target');

        $('#'+target).addClass('element-hide');

        setTimeout(function() {
            $('#'+target).slideUp();
        }, 50);


    });

    $('.js-select-search').select2().on('select2:open', function (e) {
        // console.log('as');
        // $(this).parents('.js-input-container').find('.js-input-placeholder').addClass('active');
    }).on('select2:close', function (e) {
        var testData = $(this).val();
        console.log(testData);

        if($(this).val()=="" || $(this).val()==" " || $(this).val()==null) {
            $(this).parents('.js-input-container').find('.js-input-placeholder').removeClass('active');
            $(this).parents('.js-input-container').addClass('has-error').find('.js-form-error').addClass('active');
        } else {
            $(this).parents('.js-input-container').find('.js-input-placeholder').addClass('active');
        }
    });

    $(".js-select").select2({
        minimumResultsForSearch: Infinity,
      });

    $('.js-input-container .js-select').select2({
        minimumResultsForSearch: -1,
        ////////
        placeholder: "",
        allowClear: true,
        width: '100%'
    }).on('select2:open', function (e) {
        // console.log('as');
        // $(this).parents('.js-input-container').find('.js-input-placeholder').addClass('active');
    }).on('select2:close', function (e) {
        var testData = $(this).val();
        // console.log(testData);

        if($(this).val()=="" || $(this).val()==" " || $(this).val()==null) {
            $(this).parents('.js-input-container').find('.js-input-placeholder').removeClass('active');
            $(this).parents('.js-input-container').addClass('has-error').find('.js-form-error').addClass('active');
        } else {
            $(this).parents('.js-input-container').find('.js-input-placeholder').addClass('active');
        }
    });

    $('.js-datepicker').datepicker({
        autoHide: true,
        days: ['Pazar','Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi'],
        daysShort: ['Pzr', 'Pzt', 'Salı', 'Çrş', 'Prş', 'Cuma', 'Cmt'],
        daysMin: ['Pz', 'Pt', 'Sa', 'Çr', 'Pr', 'Cu', 'Ct'],
        months: ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'],
        monthsShort: ['Oca', 'Şub', 'Mar', 'Nis', 'May', 'Haz', 'Tem', 'Ağu', 'Eyl', 'Eki', 'Kası', 'Ara'],
        weekStart: 1,

    }).on('show.datepicker', function (e) {
        console.log('show');
        // $(this).parents('.js-input-container').find('.js-input-placeholder').addClass('active');
    }).on('change', function (e) {
        console.log('pick');
        if($(this).val()=="" || $(this).val()==" " || $(this).val()==null) {
            $(this).parents('.js-input-container').find('.js-input-placeholder').removeClass('active');
            $(this).parents('.js-input-container').addClass('has-error').find('.js-form-error').addClass('active');
        } else {
            $(this).parents('.js-input-container').find('.js-input-placeholder').addClass('active');
        }
    });





    // market slider tab

    var categoryTab = $('.category-tab');
    var categoryTabWrp = $('.category-tab__wrp');

    if(categoryTabWrp.width() > $(window).width() - 61 ) {
        categoryTab.addClass('tab-mobile js-tab-mobile');
    }

    $('.js-category-tab-title').click(function (e) {
        e.preventDefault();
        $(this).parents('.js-tab-mobile').addClass('active');
        $('.js-overlay').addClass('active');
    });

    var sliderActive = $('.js-category-tab.active');

    if(sliderActive.length) {
        var sliderX = sliderActive.position().left;
        var sliderWidth = sliderActive.outerWidth() + 10;
        var sliderHeight = sliderActive.outerHeight();

        var sliderColor = sliderActive.data('color');
        $('.js-category-tab-bg').css({
            transform: 'translateX(' + sliderX + 'px)',
            width: sliderWidth,
            height: sliderHeight
        });

        $('.category-circle').css('color', sliderColor);
        $('.js-category-item').css('color', sliderColor);

    }


    $('.js-category-tab').click(function (e) {
        e.preventDefault();
        var x = $(this).position().left;
        var bgWidth = $(this).outerWidth() + 10;
        var bgHeight = $(this).outerHeight();
        var color = $(this).data('color');
        var target = $(this).data('target');

        $('.js-category-tab').removeClass('active');
        $('.js-category-tab-target').removeClass('active');

        $(this).addClass('active');

        $('.js-category-tab-target#' + target).addClass('active');

        $('.js-category-item').css('color', color);

        if(!categoryTab.hasClass('js-tab-mobile')) {
            $('.js-category-tab-bg').css({
                transform: 'translateX(' + x + 'px)',
                width: bgWidth,
                height: bgHeight
            });


            setTimeout(function() {
                $('.category-circle').removeClass('passive').css('color', color);
            }, 250);
            $('.category-circle').addClass('passive');


        } else {
            var text = $(this).text().trim();
            $('.js-category-tab-title').text(text);
            // $('.category-tab__wrp').slideUp();
            $('.js-tab-mobile').removeClass('active');
            $('.js-overlay').removeClass('active');

        }

    });


    function count(event) {

        var countInput = $('.js-count-input').val();

        if(event == "plus") {
            countInput ++;

            $('.js-count-input').val(countInput)
        }

        else if(event == "minus") {
            countInput --;



            if(countInput== 1 || countInput < 1) {
                $('.js-count-input').val(1);
            }

            else {
                $('.js-count-input').val(countInput);
            }

        }
    }

    $('.js-count-btn').click(function (e) {
        e.preventDefault();
        var event = $(this).data('event');
        count(event)
    });

    document.onkeydown = function(evt) {
        evt = evt || window.event;
        // esc
        if (evt.keyCode == 27) {
            $('.js-overlay').removeClass('active');
            $('.js-search').removeClass('active');
            $('.js-modal').removeClass('active');
            $('.js-search-category').removeClass('active');
        }
    };
    // $(".js-block-toggle#" + target).addClass("active");

    $(".js-block-tab").click(function (e) {
        e.preventDefault();
        var target = $(this).data("target");
        $(".js-block-tab").removeClass("active");
        $(".js-block-toggle").removeClass("active");
        $(this).addClass("active");
        $(".js-block-toggle#" + target).addClass("active");
    });


    $(".js-block-hov-tab").hover(function (e) {
        e.preventDefault();
        var target = $(this).data("target");
        var parent = $(this).parents('.js-menu-hover-wrp')
        parent.find(".js-block-hov-tab").removeClass("active");
        parent.find(".js-block-hov-toggle").removeClass("active");
        parent.find(this).addClass("active");
        parent.find(".js-block-hov-toggle#" + target).addClass("active");
    });


    cLog('page loaded js');


    $(".js-mascot-mouse-events").mouseover(function(){
        $(".footer-mascot__head").addClass("active");
    });
    $(".js-mascot-mouse-events").mouseout(function(){
        $(".footer-mascot__head").removeClass("active");
    });

    $('.js-category-filter').on('select2:select', function (e) {
        console.log($(this).val());
        var data = $(this).val()
        var parent = $('.js-program-chg.active')
        parent.find('.js-category').hide();
        // var itemArr = []
        parent.find('.js-category.' + data).show()
        // parent.find('.js-category').each(function (item, index) {
        //     var categoryArr = $(this).data('category').split(',')
        //     console.log(categoryArr)
        // })
    });

});






var Titan = {
    /**
     * TitanConfig
     *
     * @see master.blade.php
     */
    Config: null,

    /**
     * Helpers
     */
    Helpers: {
        /**
         * Toastr notify
         *
         * @param type
         * @param message
         * @returns {boolean}
         */
        notify: function (type, message) {

            toastr.clear();

            toastr.options = {
                "closeButton": true,
                "debug": false,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "timeOut": "10000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            };

            toastr[type](message);

            return true;
        },

        /**
         * Dom trigger
         *
         * @param element
         */
        trigger: function (selector) {
            $(selector).click();
        },

        /**
         * Dom js element call
         *
         * @param method
         * @param response
         */
        call: function (method, response) {
            window[method](response);
        },

        /**
         * Redirect page
         *
         * @param url
         * @param message
         */
        redirect: function (url, message) {
            Titan.Dimmer.page(message);

            setTimeout(function () {
                window.location = url;
            }, 1000);
        },

        /**
         * Json parser
         *
         * @param string
         * @returns {any}
         */
        textToJson: function (string) {
            return JSON.parse(string);
        },

        /**
         * Animation destroy dom element
         *
         * @param id
         */
        destroy: function (id) {

            $(id).fadeOut('slow', function () {
                $(this).remove();
            });

            id = id.replace('#', '');

            $('*[data-id="' + id + '"]').fadeOut('slow', function () {
                $('*[data-id="' + id + '"]').remove();
            });
        },

        /**
         * Default image
         *
         * @param selector
         * @param image
         */
        imageError: function (selector, image) {
            $(selector).attr('src', image ? image : Titan.Config.images.noImage);
        },

        /**
         * Load request page
         *
         * @param selector
         * @param url
         */
        load: function (selector, url) {
            Titan.Dimmer.page();

            $(selector).load(url, function (response, status, xhr) {
                Titan.Dimmer.destroy();
                Titan.Fire();

                if (status == 'error') {
                    Titan.Helpers.notify('error', Titan.Config.languages.pageNotFound);

                    return false;
                }

                return true;
            });
        }
    },

    /**
     * Currency process
     */
    Currency: {

        /**
         * Turkish money format
         *
         * @param price
         * @returns {*|*}
         */
        format: function (price) {
            return accounting.formatMoney(price, {
                symbol: '₺',
                format: '%v%s',
                precision: 2,
                decimal: ',',
                thousand: '.'
            });
        }
    },

    /**
     * Form process
     */
    Form: {

        /**
         * Disable form action
         *
         * @param selector
         */
        disable: function (selector) {
            $(selector).find('.button-submit').addClass('disabled');

            $(selector).append('<div class="ui active inverted dimmer"><div class="ui text loader"></div></div>');
        },

        /**
         * Enable form action
         *
         * @param selector
         */
        enable: function (selector) {
            $(selector).find('.button-submit').removeClass('disabled');
            $(selector).find('.ui.inverted').remove();
        },

        /**
         * Form validation check
         *
         * @param selector
         * @param rules
         */
        validation: function (selector, rules) {

            $(selector).validate({
                rules: rules,
                errorClass: 'has-error',
                errorElement: 'span',
                focusCleanup: false,
                debug: false,
                submitHandler: function (selector) {
                    if ($(selector).find('.button-submit').hasClass('disabled')) {
                        return false;
                    }

                    Titan.Form.sender(selector);

                    return false;
                }
            });
        },

        /**
         * Form send
         *
         * @param selector
         * @returns {boolean}
         */
        sender: function (selector) {

            toastr.clear();

            var form = $(selector);

            Titan.Form.disable(selector);

            form.ajaxSubmit({
                url: form.data('action'),
                type: form.data('method') ? form.data('method') : 'POST',
                dataType: 'json',
                data: $(form.data('forms')).serializeArray(),
                success: function (response) {

                    Titan.Form.enable(selector);
                    Titan.Form.responseSuccess(response);

                    return false;
                },
                error: function (response) {

                    Titan.Form.enable(selector);
                    Titan.Form.responseError(response);

                    return false;
                }
            });

            return false;
        },

        /**
         * Form success process
         *
         * @param response
         * @returns {*}
         */
        responseSuccess: function (response) {

            if (response.success) {
                Titan.Helpers.notify('success', response.success);
            }

            if (response.removed) {
                Titan.Form.destroy(response.removed);
            }

            if (response.triggers) {
                Titan.Form.triggers(response.triggers);
            }

            if (response.call) {
                Titan.Form.calls(response);
            }

            if (response.redirect) {
                return Titan.Helpers.redirect(response.redirect.url, response.redirect.message);
            }

            return true;
        },

        /**
         * Form error process
         *
         * @param response
         * @returns {*}
         */
        responseError: function (response) {

            var status = response.status;

            if (response.responseText) {
                response = Titan.Helpers.textToJson(response.responseText);
            }

            if (response.removed) {
                Titan.Form.destroy(response.removed);
            }

            if (response.triggers) {
                Titan.Form.triggers(response.triggers);
            }

            if (response.call) {
                Titan.Form.calls(response);
            }

            if (response.errors) {
                $.each(response.errors, function (index, el) {
                    Titan.Helpers.notify('error', el[0]);

                    return false;
                });
            }

            if (response.error) {
                Titan.Helpers.notify('error', response.error);
            }

            if (!response.error && status == 401) {

                var json = Titan.Helpers.textToJson(response.responseText);

                Titan.Helpers.notify('error', json.message, json.title);
            }

            if (!response.error && status == 404) {
                Titan.Helpers.notify('error', Titan.Config.languages.pageNotFound);
            }

            if (!response.error && status == 405) {
                Titan.Helpers.notify('error', Titan.Config.languages.methodNotAllowed);
            }

            if ((!response.error && status == 500) || (!response.error && status == 502)) {
                Titan.Helpers.notify('error', Titan.Config.languages.criticalError);
            }

            if (response.redirect) {
                return Titan.Helpers.redirect(response.redirect.url, response.redirect.message);
            }

            return false;
        },

        /**
         * Response data destroy
         *
         * @param items
         * @returns {boolean}
         */
        destroy: function (items) {
            $.each(items, function (index, element) {
                Titan.Helpers.destroy(element);
            });

            return true;
        },

        /**
         * Click response elements
         *
         * @param items
         * @returns {boolean}
         */
        triggers: function (items) {
            $.each(items, function (index, element) {
                Titan.Helpers.trigger(element);
            });

            return true;
        },

        /**
         * Call dom script
         *
         * @param response
         * @returns {boolean}
         */
        calls: function (response) {
            $.each(response.call, function (index, element) {
                Titan.Helpers.call(element, response);
            });

            return true;
        }
    },

    /**
     * Dimmer
     */
    Dimmer: {

        pageSelector: '#PageDimmer',

        selector: '#dimmer',

        page: function (message) {
            $(Titan.Dimmer.pageSelector).empty().append(Titan.Dimmer.create(message));
        },

        create: function (message) {

            if (!message) {
                message = Titan.Config.languages.pageLoad;
            }

            return '<div id="dimmer" class="ui active inverted dimmer"><div class="ui large text loader">' + message + '</div></div>';
        },

        destroy: function () {
            $(Titan.Dimmer.selector).remove();
        }
    },

    /**
     * Search
     */
    Search: {
        fill: function (field) {
            field.find('.form__select').on("select2:select", function (e) {
                Titan.Dimmer.page();

                var params = field.data();
                var fill = $(params.fill);

                $.each((params.fills).split(', '), function (key, paramFill) {
                    $(paramFill).find('.form__select').val(null).trigger('change');
                    $(paramFill).find('.form__select').empty().trigger("change");
                });

                $.getJSON(params.uri, {parent: e.params.data.id}, function (response) {

                    $.each(response.items, function (key, item) {
                        fill.find('.form__select').append((new Option(item.title, item.id, false, false))).trigger('change');
                    });

                    Titan.Dimmer.destroy();
                });
            });
        },

        fire: function () {
            $('.field.fill').each(function (key, element) {
                Titan.Search.fill($(element));
            })
        }
    },

    /**
     * Modal
     */
    Modal: {

        /**
         * Open selector
         *
         * @param selector
         */
        open: function (selector) {
            $('.js-modal-target').hide();
            $(selector).show();

            $('.js-overlay').addClass('active');
            $('.js-modal').fadeIn().addClass('active');
        },

        /**
         * Swal modal approve
         *
         * @param selector
         */
        approve: function (selector) {
            swal({
                title: 'Eminmisiniz?',
                text: 'Eğer bu işlemi onaylarsanız hiç bir sekilde geri alamazsınız!',
                type: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Sil',
                cancelButtonText: 'İptal',
            }).then(function (result) {
                if (!result.value) {
                    return true;
                }

                Titan.Form.sender(selector);
            });
        }
    },

    /**
     * Ui process
     */
    Ui: {
        select2: function () {
            $('.js-select-search, .form__select').select2();
            $('.form__select__tags').select2({
                tags: true,
                minimumResultsForSearch: -1,
                // dropdownParent: $parent,
                width: '100%'
            });
        },

        datepicker: function () {
            $('.js-datepicker').datepicker({
                autoHide: true,
                days: ['Pazar', 'Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi'],
                daysShort: ['Pzr', 'Pzt', 'Salı', 'Çrş', 'Prş', 'Cuma', 'Cmt'],
                daysMin: ['Pz', 'Pt', 'Sa', 'Çr', 'Pr', 'Cu', 'Ct'],
                months: ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'],
                monthsShort: ['Oca', 'Şub', 'Mar', 'Nis', 'May', 'Haz', 'Tem', 'Ağu', 'Eyl', 'Eki', 'Kası', 'Ara'],
                weekStart: 1,
                format: 'dd/mm/yyyy'

            });
        },

        featuredSlider: function () {
            return new Swiper('.js-text-slider-fade', {
                effect: 'fade',
                grabCursor: true,
                loop: true,
                centeredSlides: false,
                keyboard: true,
                spaceBetween: 0,
                slidesPerView: 1,
                speed: 500,
                navigation: {
                    nextEl: '.js-text-slider-next',
                    prevEl: '.js-text-slider-prev',
                },
                coverflowEffect: {
                    rotate: 0,
                    stretch: 0,
                    depth: 0,
                    modifier: 1,
                    slideShadows: false
                },
                breakpoints: {
                    576: {
                        // slidesPerView: 1,
                    },
                    900: {
                        // slidesPerView: 2,
                    },
                    1200: {
                        // slidesPerView: 3,
                    }
                },
                simulateTouch: true,
                pagination: {
                    el: '.js-text-slider-pagination',
                    clickable: true
                },
                on: {
                    init: function () {
                        // $('.market-slider__item-wrp').removeClass('swiper-slide-hide');
                        // $('.market-slider__item-wrp.swiper-slide-prev').addClass('swiper-slide-hide').prev().addClass('swiper-slide-hide');
                        // var count = this.slides.length;
                    },
                }
            });
        },

        autocomplete: function (input) {

            var items = [];

            $(input).on('focus', function (e) {

                if (items) {
                    $('.js-overlay').addClass('active');
                    $('.js-search').addClass('active');
                    $('.js-search-category').removeClass('active');
                }

            }).on('focusout', function () {
                if (!$(this).val() == "" || !$(this).val() == " ") {
                    $(this).addClass('active');
                } else {
                    $(this).removeClass('active');
                }
            });

            $(input).on('keyup', function () {

            });
        },

        mask: function () {
            $('.phone').mask('0 (000) 000 00 00');
            $('.cc-number').mask('0000 0000 0000 0000');
            $('.cc-cvv').mask('000');
            $('.identification-no').mask('00000000000');
        },

        headerMenu: function () {
            $('.menu-hover-links__item').hover(function () {
                $(this)
                    .parent()
                    .parent()
                    .find('.menu-hover-section .menu-hover-category__item')
                    .empty()
                    .html($('.menu-hover-section-' + $(this).data('key')).html());
            });
        },

        fire: function () {
            Titan.Ui.select2();
            Titan.Ui.datepicker();
            Titan.Ui.mask();
            Titan.Ui.headerMenu();
        }
    },

    /**
     * Run process
     *
     * @constructor
     */
    Fire: function () {
        Titan.Config = TitanConfig;

        Titan.Ui.fire();
        Titan.Search.fire();
    }
};


$(document).ready(function () {
    Titan.Fire();
});

//# sourceMappingURL=app.min.js.map
